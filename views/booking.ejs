<!DOCTYPE html>
<html>

<head>
    <title>All Bookings</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
</head>

<body>
    <%= booking.name %>
        <!-- ,<%= booking.numTickets %> -->
        ,<%= booking.number %>
            ,<%= booking.year %>
                ,<%= booking.age %>
                    ,<%= booking.fteacher %>
                        ,<%= booking.fclass %>
                            ,<%= booking.enjoy %>
            <!-- ,<%= booking.email %>
                ,<%= booking.team %>
                    ,<%= booking.superhero %>
                        ,<%= booking.payment %> -->
                            <!-- <form action="/bookings/delete/<%= booking.$loki %>" method="post">
	<button type="submit">Delete</button>
</form> -->

                            <button type="button" class="button is-danger"
                                onclick="deleteBooking('<%= booking.$loki %>')">Delete</button>

                            <script>
                                async function deleteBooking(id) {
                                    var r = confirm("Confirm Delete?");

                                    if (r) {
                                        var response = await fetch("/bookings/" + id, {
                                            method: "DELETE",
                                        });

                                        if (response.ok) {
                                            // var html = await response.text();
                                            // alert(html);
                                            alert("Booking deleted.");
                                            location.assign("/bookings");
                                        } else {
                                            alert(response.status + ": " + response.statusText);
                                        }

                                    } else {
                                        alert("cancelled");
                                    }
                                };
                            </script>

</body>

</html>